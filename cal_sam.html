<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìº˜ë¦°ë” ì• í”Œë¦¬ì¼€ì´ì…˜</title>
    <style>
        :root {
            --primary-color: #1a73e8;
            --border-color: #dadce0;
            --hover-bg: #f1f3f4;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            color: #3c4043;
            background-color: #fff;
            line-height: 1.5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 24px;
            font-weight: 500;
            color: #202124;
        }
        
        .nav-buttons {
            display: flex;
            gap: 16px;
        }
        
        .view-buttons {
            display: flex;
            gap: 8px;
        }
        
        .view-button {
            background: white;
            border: 1px solid var(--border-color);
            cursor: pointer;
            border-radius: 18px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        
        .date-nav {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .date-title {
            font-size: 20px;
            font-weight: 500;
            min-width: 220px;
            text-align: center;
            color: #202124;
        }
        
        .nav-btn {
            background: white;
            border: 1px solid var(--border-color);
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        
        .nav-btn:hover {
            background: var(--hover-bg);
        }
        
        .today-btn {
            background: white;
            border: 1px solid var(--border-color);
            cursor: pointer;
            border-radius: 18px;
            padding: 6px 16px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        
        .today-btn:hover {
            background: var(--hover-bg);
        }
        
        .calendar {
            margin-top: 12px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* ì›”ë³„ ë·° ìŠ¤íƒ€ì¼ */
        .month-view {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            border: 1px solid var(--border-color);
            border-bottom: none;
        }
        
        .day-header {
            background: #f8f9fa;
            padding: 10px;
            text-align: center;
            font-weight: 500;
            border-bottom: 1px solid var(--border-color);
            color: #70757a;
        }
        
        .day-header:first-child, 
        .day-cell[data-day="0"] .day-number {
            color: #ea4335; /* ì¼ìš”ì¼ ìƒ‰ìƒ */
        }
        
        .day-header:last-child, 
        .day-cell[data-day="6"] .day-number {
            color: #34a853; /* í† ìš”ì¼ ìƒ‰ìƒ */
        }
        
        .day-cell {
            min-height: 120px;
            padding: 8px;
            position: relative;
            border-right: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            background: white;
        }
        
        .day-cell:last-child {
            border-right: none;
        }
        
        .day-number {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .today .day-number {
            background-color: var(--primary-color);
            color: white !important;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .other-month {
            background-color: #f8f9fa;
            opacity: 0.7;
        }
        
        .other-month .day-number {
            color: #70757a !important;
        }
        
        .day-events {
            margin-top: 5px;
        }
        
        /* ì£¼ë³„ ë·° ìŠ¤íƒ€ì¼ */
        .week-view {
            display: grid;
            grid-template-columns: 60px repeat(7, 1fr);
            border: 1px solid var(--border-color);
        }
        
        .time-marker {
            background: #f8f9fa;
            padding: 10px 5px;
            text-align: right;
            font-size: 12px;
            border-bottom: 1px solid var(--border-color);
            height: 40px;
            color: #70757a;
        }
        
        .week-day-header {
            background: #f8f9fa;
            padding: 10px;
            text-align: center;
            font-weight: 500;
            border-bottom: 1px solid var(--border-color);
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .week-day-header:first-of-type {
            color: #ea4335; /* ì¼ìš”ì¼ ìƒ‰ìƒ */
        }
        
        .week-day-header:last-of-type {
            color: #34a853; /* í† ìš”ì¼ ìƒ‰ìƒ */
        }
        
        .week-day-number {
            font-size: 20px;
            font-weight: 500;
            margin-top: 4px;
        }
        
        .today-header .week-day-number {
            background-color: var(--primary-color);
            color: white;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .week-day-column {
            background: white;
            position: relative;
            border-left: 1px solid var(--border-color);
        }
        
        .week-time-slot {
            height: 40px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }
        
        /* ì¼ë³„ ë·° ìŠ¤íƒ€ì¼ */
        .day-view {
            display: grid;
            grid-template-columns: 60px 1fr;
            border: 1px solid var(--border-color);
        }
        
        .day-column {
            background: white;
            position: relative;
            border-left: 1px solid var(--border-color);
        }
        
        .time-slot {
            height: 40px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }
        
        /* ì´ë²¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .event {
            margin-bottom: 4px;
            font-size: 12px;
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding: 4px 6px;
            border-radius: 4px;
            color: white;
            transition: all 0.2s ease;
            background-color: var(--primary-color);
        }
        
        .event:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .event-time {
            font-weight: 500;
            margin-right: 4px;
        }
        
        .time-event {
            position: absolute;
            left: 0;          /* Add this line */
            right: 0;         /* Add this line */
            margin: 0 4px;    /* Add this line */
            color: white;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            z-index: 1;
            overflow: hidden;
            width: calc(100% - 8px);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .time-event:hover {
            transform: translateX(2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .event-title {
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .event-more {
            text-align: center;
            font-size: 11px;
            color: #70757a;
            padding: 2px;
            cursor: pointer;
        }
        
        .event-more:hover {
            text-decoration: underline;
        }
        
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 24px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 500;
            color: #202124;
        }
        
        .modal-time {
            color: #5f6368;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
        }
        
        .modal-time:before {
            content: "ğŸ•’";
            margin-right: 8px;
        }
        
        .modal-body {
            margin-bottom: 24px;
            line-height: 1.5;
            color: #3c4043;
            white-space: pre-line;
        }
        
        .modal-category {
            display: inline-block;
            padding: 4px 8px;
            color: white;
            border-radius: 12px;
            font-size: 12px;
            margin-top: 8px;
            font-weight: 500;
        }
        
        .close {
            font-size: 24px;
            cursor: pointer;
            color: #5f6368;
            transition: all 0.2s ease;
        }
        
        .close:hover {
            color: #202124;
        }
        
        /* í˜„ì¬ ì‹œê°„ í‘œì‹œì„  */
        .current-time-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: #ea4335;
            z-index: 5;
        }
        
        .current-time-marker {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ea4335;
            border-radius: 50%;
            transform: translateX(-5px) translateY(-4px);
            z-index: 6;
        }
        
        /* ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ */
        @media (max-width: 768px) {
            .container {
                padding: 8px;
            }
            
            .title {
                font-size: 20px;
            }
            
            .view-button {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .date-title {
                font-size: 16px;
                min-width: 160px;
            }
            
            .nav-btn {
                width: 32px;
                height: 32px;
            }
            
            .today-btn {
                padding: 4px 12px;
                font-size: 12px;
            }
            
            .day-cell {
                min-height: 80px;
                padding: 4px;
            }
            
            .modal-content {
                width: 95%;
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="date-nav">
                <button class="nav-btn" id="prevBtn">&#10094;</button>
                <div class="date-title" id="dateTitle">2024ë…„ 3ì›”</div>
                <button class="nav-btn" id="nextBtn">&#10095;</button>
                <button class="today-btn" id="todayBtn">ì˜¤ëŠ˜</button>
            </div>
            <div class="nav-buttons">
                <div class="view-buttons">
                    <button class="view-button" id="monthView">ì›”</button>
                    <button class="view-button" id="weekView">ì£¼</button>
                    <button class="view-button" id="dayView">ì¼</button>
                </div>
            </div>
        </div>
        
        <div class="calendar" id="calendarContainer"></div>
    </div>
    
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle"></div>
                <span class="close" id="closeModal">&times;</span>
            </div>
            <div class="modal-time" id="modalTime"></div>
            <div class="modal-body" id="modalContent"></div>
            <div class="modal-category" id="modalCategory"></div>
        </div>
    </div>

    <script>
        // í˜„ì¬ ë‚ ì§œ ì„¤ì •
        let currentDate = new Date();
        let currentView = 'month'; // ê¸°ë³¸ ë·°ëŠ” ì›”ë³„
        
        // DOM ìš”ì†Œ
        const monthViewBtn = document.getElementById('monthView');
        const weekViewBtn = document.getElementById('weekView');
        const dayViewBtn = document.getElementById('dayView');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const todayBtn = document.getElementById('todayBtn');
        const dateTitle = document.getElementById('dateTitle');
        const calendarContainer = document.getElementById('calendarContainer');
        const eventModal = document.getElementById('eventModal');
        const closeModal = document.getElementById('closeModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalTime = document.getElementById('modalTime');
        const modalContent = document.getElementById('modalContent');
        const modalCategory = document.getElementById('modalCategory');
        
        // ìƒ˜í”Œ ë°ì´í„° (ì‹¤ì œë¡œëŠ” localStorageì—ì„œ ê°€ì ¸ì˜´)
        const sampleEvents = [
            {date:"2024-03-05", time_start:"0105", time_end:"0731", title:"í…ŒìŠ¤íŠ¸ ì œëª©", content:"ë°ì´í„° í…ŒìŠ¤íŠ¸", category:"work"},
            {date:"2024-03-22", time_start:"1000", time_end:"1100", title:"í”„ë¡œì íŠ¸ ê¸°íš íšŒì˜", content:"ì›”ê°„ ë³´ê³ ì„œ ì‘ì„±ì„ ìœ„í•œ í”„ë¡œì íŠ¸ ê¸°íš íšŒì˜\nì°¸ì„ì: ê¹€ëŒ€ë¦¬, ë°•ê³¼ì¥, ì´ì‚¬ì›", category:"work"},
            {date:"2024-03-22", time_start:"1400", time_end:"1600", title:"ë°œí‘œ ì¤€ë¹„", content:"í´ë¼ì´ì–¸íŠ¸ ë¯¸íŒ…ì„ ìœ„í•œ ë°œí‘œ ìë£Œ ì¤€ë¹„\në°œí‘œ ë‚´ìš©: ì‹ ê·œ í”„ë¡œì íŠ¸ ì§„í–‰ ìƒí™©", category:"work"},
            {date:"2024-03-22", time_start:"1900", time_end:"2100", title:"ì €ë… ì•½ì†", content:"ì¹œêµ¬ë“¤ê³¼ ì‚¼ê²¹ì‚´ ë¨¹ê¸°ë¡œ í•œ ì•½ì†\nì¥ì†Œ: ê°•ë‚¨ì—­ ë§›ì§‘", category:"personal"},
            {date:"2024-03-23", time_start:"0900", time_end:"1000", title:"ì•„ì¹¨ ë¯¸íŒ…", content:"ì£¼ê°„ ì—…ë¬´ ê³„íš ìˆ˜ë¦½ íšŒì˜\níšŒì˜ì‹¤: 3ì¸µ ëŒ€íšŒì˜ì‹¤", category:"work"},
            {date:"2024-03-23", time_start:"1100", time_end:"1200", title:"ì›¹ì‚¬ì´íŠ¸ ë””ìì¸ ê²€í† ", content:"ì‹ ê·œ ì›¹ì‚¬ì´íŠ¸ ë””ìì¸ ê²€í†  íšŒì˜\nì£¼ìš” ë…¼ì˜ì‚¬í•­: ìƒ‰ìƒ íŒ”ë ˆíŠ¸, ë ˆì´ì•„ì›ƒ ê²°ì •", category:"work"},
            {date:"2024-03-23", time_start:"1500", time_end:"1600", title:"í—¬ìŠ¤ì¥", content:"ê°œì¸ PT ì„¸ì…˜\níŠ¸ë ˆì´ë„ˆ: ê¹€íŠ¸ë ˆì´ë„ˆ", category:"health"},
            {date:"2024-03-24", time_start:"1000", time_end:"1130", title:"ì˜ì‚¬ ì˜ˆì•½", content:"ì •ê¸° ê±´ê°• ê²€ì§„\në³‘ì›: ì„œìš¸ ë©”ë””ì»¬ ì„¼í„°", category:"health"},
            {date:"2024-03-24", time_start:"1300", time_end:"1400", title:"ì ì‹¬ ì•½ì†", content:"íŒ€ì›ë“¤ê³¼ ì ì‹¬ ì‹ì‚¬\në©”ë‰´: ì´íƒˆë¦¬ì•ˆ", category:"personal"},
            {date:"2024-03-24", time_start:"1600", time_end:"1700", title:"í™”ìƒ íšŒì˜", content:"í•´ì™¸ ì§€ì‚¬ì™€ í™”ìƒ íšŒì˜\nì£¼ì œ: ê¸€ë¡œë²Œ ë§ˆì¼€íŒ… ì „ëµ", category:"work"},
            {date:"2024-03-25", time_start:"0930", time_end:"1030", title:"ì½”ë“œ ë¦¬ë·°", content:"ì‹ ê·œ ê¸°ëŠ¥ ì½”ë“œ ë¦¬ë·° ì„¸ì…˜\në‹´ë‹¹ì: ê°œë°œíŒ€", category:"work"},
            {date:"2024-03-25", time_start:"1400", time_end:"1500", title:"ì¸í„°ë·°", content:"ì‹ ì… ê°œë°œì ì¸í„°ë·°\nì§€ì›ì: 3ëª…", category:"work"},
            {date:"2024-03-25", time_start:"1800", time_end:"2000", title:"ì˜í™” ê´€ëŒ", content:"ì‹ ì‘ ì˜í™” ê´€ëŒ\nì˜í™”ê´€: CGV ìš©ì‚°", category:"personal"},
            {date:"2024-03-26", time_start:"1000", time_end:"1100", title:"ì œí’ˆ ë°ëª¨", content:"ì‹ ê·œ ì œí’ˆ ë°ëª¨ ì„¸ì…˜\nì°¸ì„ì: ë§ˆì¼€íŒ…íŒ€, ì˜ì—…íŒ€", category:"work"},
            {date:"2024-03-26", time_start:"1200", time_end:"1300", title:"ëŸ°ì¹˜ ë¯¸íŒ…", content:"ì‹ ê·œ íŒŒíŠ¸ë„ˆì‹­ ë…¼ì˜\nì¥ì†Œ: íšŒì‚¬ ê·¼ì²˜ ë ˆìŠ¤í† ë‘", category:"work"},
            {date:"2024-03-26", time_start:"1500", time_end:"1700", title:"ì½”ë”© ì‹œê°„", content:"ì‹ ê·œ ê¸°ëŠ¥ ê°œë°œ\n- ì‚¬ìš©ì ì¸ì¦ ê¸°ëŠ¥ êµ¬í˜„\n- ëŒ€ì‹œë³´ë“œ UI ê°œì„ ", category:"work"},
            {date:"2024-03-27", time_start:"0900", time_end:"1000", title:"íŒ€ íšŒì˜", content:"ì£¼ê°„ ì§„í–‰ ìƒí™© ì ê²€\në…¼ì˜ ì‚¬í•­: ì¼ì • ì¡°ì •, ìì› í• ë‹¹", category:"work"},
            {date:"2024-03-27", time_start:"1300", time_end:"1400", title:"ë©˜í† ë§ ì„¸ì…˜", content:"ì£¼ë‹ˆì–´ ê°œë°œì ë©˜í† ë§\nì£¼ì œ: ì½”ë“œ ìµœì í™”", category:"education"},
            {date:"2024-03-27", time_start:"1800", time_end:"1900", title:"ìš”ê°€ ìˆ˜ì—…", content:"ì£¼ê°„ ìš”ê°€ ìˆ˜ì—…\nê°•ì‚¬: ì´ìš”ê°€", category:"health"},
            {date:"2024-03-28", time_start:"1100", time_end:"1200", title:"í´ë¼ì´ì–¸íŠ¸ ë¯¸íŒ…", content:"ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸ ë¯¸íŒ…\në¯¸íŒ… ì¥ì†Œ: í´ë¼ì´ì–¸íŠ¸ ì‚¬ë¬´ì‹¤", category:"work"},
            {date:"2024-03-28", time_start:"1400", time_end:"1600", title:"ì›Œí¬ìƒµ", content:"UX ë””ìì¸ ì›Œí¬ìƒµ\nê°•ì‚¬: ê¹€ë””ìì¸", category:"education"},
            {date:"2024-03-28", time_start:"1800", time_end:"2000", title:"ì¹œêµ¬ ìƒì¼", content:"ì¹œêµ¬ ìƒì¼ ì €ë… ì‹ì‚¬\nì¥ì†Œ: ëª…ë™ ë ˆìŠ¤í† ë‘\nì„ ë¬¼: ì±…", category:"personal"},
            {date:"2024-03-29", time_start:"1000", time_end:"1100", title:"í”„ë¡œì íŠ¸ ë¦¬ë·°", content:"ì›”ê°„ í”„ë¡œì íŠ¸ ë¦¬ë·°\në‹´ë‹¹ì: í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €", category:"work"},
            {date:"2024-03-29", time_start:"1200", time_end:"1300", title:"íŒ€ ëŸ°ì¹˜", content:"íŒ€ ë¹Œë”© ëŸ°ì¹˜\nì¥ì†Œ: íšŒì‚¬ ê·¼ì²˜ í•œì‹ë‹¹", category:"work"},
            {date:"2024-03-29", time_start:"1600", time_end:"1700", title:"ì£¼ê°„ íšŒê³ ", content:"ì£¼ê°„ ì—…ë¬´ íšŒê³  ë° ë‹¤ìŒ ì£¼ ê³„íš\nì°¸ì„ì: ì „ì²´ íŒ€ì›", category:"work"},
            {date:"2024-03-30", time_start:"1000", time_end:"1200", title:"ì£¼ë§ ë¸ŒëŸ°ì¹˜", content:"ê°€ì¡±ê³¼ í•¨ê»˜ ë¸ŒëŸ°ì¹˜\nì¥ì†Œ: ì¹´í˜", category:"personal"},
            {date:"2024-03-30", time_start:"1500", time_end:"1700", title:"ì‡¼í•‘", content:"ìƒí•„í’ˆ ì‡¼í•‘\nì¥ì†Œ: ì´ë§ˆíŠ¸", category:"personal"},
            {date:"2024-03-31", time_start:"1100", time_end:"1300", title:"ê°€ì¡± ëª¨ì„", content:"ì›”ê°„ ê°€ì¡± ëª¨ì„\nì¥ì†Œ: ë¶€ëª¨ë‹˜ ëŒ", category:"personal"},
            {date:"2024-03-31", time_start:"1600", time_end:"1800", title:"ë…ì„œ ì‹œê°„", content:"ì‹ ê°„ ë„ì„œ ì½ê¸°\nì±… ì œëª©: ë§ˆì¼€íŒ…ì˜ ë¯¸ë˜", category:"personal"}
        ];
        
        // ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ (ì´ë²¤íŠ¸ ì‹œê°í™”ë¥¼ ìœ„í•œ ìƒ‰ìƒ ë§¤í•‘)
        const categoryColors = {
            'work': '#4285f4',       // íŒŒë€ìƒ‰
            'personal': '#0f9d58',   // ë…¹ìƒ‰
            'health': '#db4437',     // ë¹¨ê°„ìƒ‰
            'education': '#f4b400',  // ë…¸ë€ìƒ‰
            'default': '#3f51b5'     // ê¸°ë³¸ ìƒ‰ìƒ
        };
        
        // ì¹´í…Œê³ ë¦¬ ì´ë¦„ ë§¤í•‘
        const categoryNames = {
            'work': 'ì—…ë¬´',
            'personal': 'ê°œì¸',
            'health': 'ê±´ê°•',
            'education': 'êµìœ¡',
            'default': 'ê¸°íƒ€'
        };
        
        // localStorageì— ìƒ˜í”Œ ë°ì´í„° ì €ì¥
        function initializeLocalStorage() {
            localStorage.clear(); // Add this line to clear any old data
            if (!localStorage.getItem('calendarEvents')) {
                localStorage.setItem('calendarEvents', JSON.stringify(sampleEvents));
            }
        }
        
        // localStorageì—ì„œ ì´ë²¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
        function getEvents() {
            const events = localStorage.getItem('calendarEvents');
            const parsedEvents = events ? JSON.parse(events) : [];
            console.log('Loaded events:', parsedEvents); // Add this line for debugging
            return parsedEvents;
        }
        
        // ë‚ ì§œ í¬ë§¤íŒ… í•¨ìˆ˜
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // ì‹œê°„ í¬ë§¤íŒ… í•¨ìˆ˜ (HHMM -> HH:MM)
        function formatTime(time) {
            if (time.length !== 4) return time;
            return `${time.substring(0, 2)}:${time.substring(2, 4)}`;
        }
        
        // ë‚ ì§œ í•œê¸€ í¬ë§¤íŒ… í•¨ìˆ˜
        function formatKoreanDate(dateStr) {
            const date = new Date(dateStr);
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekday = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][date.getDay()];
            return `${year}ë…„ ${month}ì›” ${day}ì¼ (${weekday})`;
        }
        
        // ìš”ì¼ ì´ë¦„ ë°°ì—´
        const weekdayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
        
        // ì¹´í…Œê³ ë¦¬ì— ë”°ë¥¸ ìƒ‰ìƒ ê°€ì ¸ì˜¤ê¸°
        function getCategoryColor(category) {
            return categoryColors[category] || categoryColors['default'];
        }
        
        // ì¹´í…Œê³ ë¦¬ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
        function getCategoryName(category) {
            return categoryNames[category] || categoryNames['default'];
        }
        
        // ì´ë²¤íŠ¸ë¥¼ ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
        function sortEventsByTime(events) {
            return events.sort((a, b) => {
                if (a.date !== b.date) {
                    return a.date.localeCompare(b.date);
                }
                return a.time_start.localeCompare(b.time_start);
            });
        }
        
        // ì›”ë³„ ë·° ë Œë”ë§
        function renderMonthView() {
            // í˜„ì¬ ì›”ì˜ ì²« ë‚ ê³¼ ë§ˆì§€ë§‰ ë‚  êµ¬í•˜ê¸°
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            
            // ì´ì „ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ ë“¤ êµ¬í•˜ê¸° (ì²« ì£¼ë¥¼ ì±„ìš°ê¸° ìœ„í•´)
            const prevMonthLastDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 0);
            const startingDayOfWeek = firstDay.getDay(); // ì²« ë‚ ì˜ ìš”ì¼ (0: ì¼ìš”ì¼)
            
            // ë‚ ì§œ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
            dateTitle.textContent = `${currentDate.getFullYear()}ë…„ ${currentDate.getMonth() + 1}ì›”`;
            
            // ì›”ë³„ ë·° HTML ìƒì„±
            let html = '<div class="month-view">';
            
            // ìš”ì¼ í—¤ë” ì¶”ê°€
            weekdayNames.forEach(day => {
                html += `<div class="day-header">${day}</div>`;
            });
            
            // ì´ì „ ë‹¬ì˜ ë‚ ì§œë“¤ ì¶”ê°€
            let day = prevMonthLastDay.getDate() - startingDayOfWeek + 1;
            for (let i = 0; i < startingDayOfWeek; i++) {
                html += `<div class="day-cell other-month" data-day="${i}">
                            <div class="day-number">${day}</div>
                            <div class="day-events"></div>
                        </div>`;
                day++;
            }
            
            
            // í˜„ì¬ ì›”ì˜ ë‚ ì§œë“¤ ì¶”ê°€
            const today = new Date();
            for (let i = 1; i <= lastDay.getDate(); i++) {
                const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), i);
                const dayOfWeek = date.getDay();
                const isToday = today.getFullYear() === date.getFullYear() && 
                                today.getMonth() === date.getMonth() && 
                                today.getDate() === i;
                
                html += `<div class="day-cell ${isToday ? 'today' : ''}" data-day="${dayOfWeek}" data-date="${formatDate(date)}">
                            <div class="day-number">${i}</div>
                            <div class="day-events"></div>
                        </div>`;
            }
            
            // ë‹¤ìŒ ë‹¬ì˜ ë‚ ì§œë“¤ ì¶”ê°€ (ë§ˆì§€ë§‰ ì£¼ë¥¼ ì±„ìš°ê¸° ìœ„í•´)
            const remainingCells = 7 - ((startingDayOfWeek + lastDay.getDate()) % 7);
            if (remainingCells < 7) {
                for (let i = 1; i <= remainingCells; i++) {
                    html += `<div class="day-cell other-month" data-day="${(lastDay.getDay() + i) % 7}">
                                <div class="day-number">${i}</div>
                                <div class="day-events"></div>
                            </div>`;
                }
            }
            
            html += '</div>';
            calendarContainer.innerHTML = html;
            
            // ì´ë²¤íŠ¸ ì¶”ê°€
            addEventsToMonthView();
        }
        
        // ì£¼ë³„ ë·° ë Œë”ë§
        function renderWeekView() {
            // í˜„ì¬ ì£¼ì˜ ì‹œì‘ì¼ (ì¼ìš”ì¼)
            const currentDay = currentDate.getDay();
            const startDate = new Date(currentDate);
            startDate.setDate(currentDate.getDate() - currentDay);
            
            // ë‚ ì§œ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
            const endDate = new Date(startDate);
            endDate.setDate(startDate.getDate() + 6);
            
            const startMonth = startDate.getMonth() + 1;
            const endMonth = endDate.getMonth() + 1;
            
            if (startDate.getMonth() === endDate.getMonth()) {
                dateTitle.textContent = `${startDate.getFullYear()}ë…„ ${startMonth}ì›”`;
            } else {
                dateTitle.textContent = `${startDate.getFullYear()}ë…„ ${startMonth}ì›” - ${endMonth}ì›”`;
            }
            
            // ì£¼ë³„ ë·° HTML ìƒì„±
            let html = '<div class="week-view">';
            
            // ì‹œê°„ ë§ˆì»¤ ì¶”ê°€
            html += '<div class="time-marker"></div>';
            
            // ìš”ì¼ í—¤ë” ì¶”ê°€
            const today = new Date();
            for (let i = 0; i < 7; i++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                
                const isToday = today.getFullYear() === date.getFullYear() && 
                                today.getMonth() === date.getMonth() && 
                                today.getDate() === date.getDate();
                
                html += `<div class="week-day-header ${isToday ? 'today-header' : ''}" data-date="${formatDate(date)}">
                            ${weekdayNames[i]}
                            <div class="week-day-number">${date.getDate()}</div>
                        </div>`;
            }
            
            // ì‹œê°„ ìŠ¬ë¡¯ ì¶”ê°€
            for (let hour = 0; hour < 24; hour++) {
                const formattedHour = hour.toString().padStart(2, '0') + ':00';
                html += `<div class="time-marker">${formattedHour}</div>`;
                
                for (let i = 0; i < 7; i++) {
                    const date = new Date(startDate);
                    date.setDate(startDate.getDate() + i);
                    html += `<div class="week-time-slot" data-hour="${hour}" data-date="${formatDate(date)}"></div>`;
                }
            }
            
            html += '</div>';
            calendarContainer.innerHTML = html;
            
            // ì´ë²¤íŠ¸ ì¶”ê°€
            addEventsToWeekView();
            
            // í˜„ì¬ ì‹œê°„ í‘œì‹œì„  ì¶”ê°€
            addCurrentTimeLine();
        }
        
        // ì¼ë³„ ë·° ë Œë”ë§
        function renderDayView() {
            // ë‚ ì§œ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
            dateTitle.textContent = formatKoreanDate(formatDate(currentDate));
            
            // ì¼ë³„ ë·° HTML ìƒì„±
            let html = '<div class="day-view">';
            
            // ì‹œê°„ ë§ˆì»¤ ì¶”ê°€
            for (let hour = 0; hour < 24; hour++) {
                const formattedHour = hour.toString().padStart(2, '0') + ':00';
                html += `<div class="time-marker">${formattedHour}</div>`;
                html += `<div class="time-slot" data-hour="${hour}" data-date="${formatDate(currentDate)}"></div>`;
            }
            
            html += '</div>';
            calendarContainer.innerHTML = html;
            
            // ì´ë²¤íŠ¸ ì¶”ê°€
            addEventsToDayView();
            
            // í˜„ì¬ ì‹œê°„ í‘œì‹œì„  ì¶”ê°€
            addCurrentTimeLine();
        }
        
        // ì›”ë³„ ë·°ì— ì´ë²¤íŠ¸ ì¶”ê°€
        function addEventsToMonthView() {
            const events = getEvents();
            const dayCells = document.querySelectorAll('.day-cell[data-date]');
            
            // ë‚ ì§œë³„ë¡œ ì´ë²¤íŠ¸ ê·¸ë£¹í™”
            const eventsByDate = {};
            events.forEach(event => {
                if (!eventsByDate[event.date]) {
                    eventsByDate[event.date] = [];
                }
                eventsByDate[event.date].push(event);
            });
            
            // ê° ë‚ ì§œ ì…€ì— ì´ë²¤íŠ¸ ì¶”ê°€
            dayCells.forEach(cell => {
                const dateStr = cell.getAttribute('data-date');
                const dayEvents = cell.querySelector('.day-events');
                
                if (eventsByDate[dateStr]) {
                    // ì´ë²¤íŠ¸ ì •ë ¬
                    const sortedEvents = sortEventsByTime(eventsByDate[dateStr]);
                    
                    // ìµœëŒ€ 3ê°œê¹Œì§€ë§Œ í‘œì‹œí•˜ê³  ë‚˜ë¨¸ì§€ëŠ” "ë”ë³´ê¸°"ë¡œ í‘œì‹œ
                    const maxVisibleEvents = 3;
                    const visibleEvents = sortedEvents.slice(0, maxVisibleEvents);
                    
                    visibleEvents.forEach(event => {
                        const eventEl = document.createElement('div');
                        eventEl.className = 'event';
                        eventEl.style.backgroundColor = getCategoryColor(event.category);
                        eventEl.innerHTML = `
                            <span class="event-time">${formatTime(event.time_start)}</span>
                            <span class="event-title">${event.title}</span>
                        `;
                        
                        // ì´ë²¤íŠ¸ í´ë¦­ ì‹œ ëª¨ë‹¬ í‘œì‹œ
                        eventEl.addEventListener('click', () => showEventModal(event));
                        
                        dayEvents.appendChild(eventEl);
                    });
                    
                    // ë” ë§ì€ ì´ë²¤íŠ¸ê°€ ìˆìœ¼ë©´ "ë”ë³´ê¸°" í‘œì‹œ
                    if (sortedEvents.length > maxVisibleEvents) {
                        const moreEl = document.createElement('div');
                        moreEl.className = 'event-more';
                        moreEl.textContent = `+ ${sortedEvents.length - maxVisibleEvents}ê°œ ë”ë³´ê¸°`;
                        
                        // ë”ë³´ê¸° í´ë¦­ ì‹œ ëª¨ë“  ì´ë²¤íŠ¸ í‘œì‹œ
                        moreEl.addEventListener('click', () => {
                            // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ ì²« ë²ˆì§¸ ì´ë²¤íŠ¸ì˜ ëª¨ë‹¬ì„ í‘œì‹œ
                            showEventModal(sortedEvents[maxVisibleEvents]);
                        });
                        
                        dayEvents.appendChild(moreEl);
                    }
                }
            });
        }
        
        // ì£¼ë³„ ë·°ì— ì´ë²¤íŠ¸ ì¶”ê°€
        function addEventsToWeekView() {
            const events = getEvents();
            const timeSlots = document.querySelectorAll('.week-time-slot');
            
            // ë‚ ì§œë³„ë¡œ ì´ë²¤íŠ¸ ê·¸ë£¹í™”
            const eventsByDate = {};
            events.forEach(event => {
                if (!eventsByDate[event.date]) {
                    eventsByDate[event.date] = [];
                }
                eventsByDate[event.date].push(event);
            });
            
            // ê° ë‚ ì§œì— ì´ë²¤íŠ¸ ì¶”ê°€
            Object.keys(eventsByDate).forEach(dateStr => {
                const dateEvents = eventsByDate[dateStr];
                
                dateEvents.forEach(event => {
                    // ì´ë²¤íŠ¸ ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ ê³„ì‚°
                    const startHour = parseInt(event.time_start.substring(0, 2));
                    const startMinute = parseInt(event.time_start.substring(2, 4));
                    const endHour = parseInt(event.time_end.substring(0, 2));
                    const endMinute = parseInt(event.time_end.substring(2, 4));
                    
                    // ì´ë²¤íŠ¸ ìœ„ì¹˜ ë° ë†’ì´ ê³„ì‚°
                    const startPosition = startHour + startMinute / 60;
                    const duration = (endHour + endMinute / 60) - startPosition;
                    
                    // í•´ë‹¹ ë‚ ì§œì™€ ì‹œê°„ì˜ ìŠ¬ë¡¯ ì°¾ê¸°
                    const slot = document.querySelector(`.week-time-slot[data-date="${dateStr}"][data-hour="${Math.floor(startPosition)}"]`);
                    
                    if (slot) {
                        const eventEl = document.createElement('div');
                        eventEl.className = 'time-event';
                        eventEl.style.backgroundColor = getCategoryColor(event.category);
                        eventEl.style.top = `${(startPosition % 1) * 40}px`;
                        eventEl.style.height = `${duration * 40}px`;
                        eventEl.innerHTML = `<div class="event-title">${event.title}</div>`;
                        
                        // ì´ë²¤íŠ¸ í´ë¦­ ì‹œ ëª¨ë‹¬ í‘œì‹œ
                        eventEl.addEventListener('click', () => showEventModal(event));
                        
                        slot.appendChild(eventEl);
                    }
                });
            });
        }
        
        // ì¼ë³„ ë·°ì— ì´ë²¤íŠ¸ ì¶”ê°€
        function addEventsToDayView() {
            const events = getEvents();
            const dateStr = formatDate(currentDate);
            const timeSlots = document.querySelectorAll('.time-slot');
            
            // í˜„ì¬ ë‚ ì§œì˜ ì´ë²¤íŠ¸ë§Œ í•„í„°ë§
            const dateEvents = events.filter(event => event.date === dateStr);
            
            // ì´ë²¤íŠ¸ ì¶”ê°€
            dateEvents.forEach(event => {
                // ì´ë²¤íŠ¸ ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ ê³„ì‚°
                const startHour = parseInt(event.time_start.substring(0, 2));
                const startMinute = parseInt(event.time_start.substring(2, 4));
                const endHour = parseInt(event.time_end.substring(0, 2));
                const endMinute = parseInt(event.time_end.substring(2, 4));
                
                // ì´ë²¤íŠ¸ ìœ„ì¹˜ ë° ë†’ì´ ê³„ì‚°
                const startPosition = startHour + startMinute / 60;
                const duration = (endHour + endMinute / 60) - startPosition;
                
                // í•´ë‹¹ ì‹œê°„ì˜ ìŠ¬ë¡¯ ì°¾ê¸°
                const slot = document.querySelector(`.time-slot[data-hour="${Math.floor(startPosition)}"]`);
                
                if (slot) {
                    const eventEl = document.createElement('div');
                    eventEl.className = 'time-event';
                    eventEl.style.backgroundColor = getCategoryColor(event.category);
                    eventEl.style.top = `${(startPosition % 1) * 40}px`;
                    eventEl.style.height = `${duration * 40}px`;
                    eventEl.innerHTML = `<div class="event-title">${event.title}</div>`;
                    
                    // ì´ë²¤íŠ¸ í´ë¦­ ì‹œ ëª¨ë‹¬ í‘œì‹œ
                    eventEl.addEventListener('click', () => showEventModal(event));
                    
                    slot.appendChild(eventEl);
                }
            });
        }
        
        // í˜„ì¬ ì‹œê°„ í‘œì‹œì„  ì¶”ê°€
        function addCurrentTimeLine() {
            if (currentView === 'day' || currentView === 'week') {
                const now = new Date();
                const currentHour = now.getHours();
                const currentMinute = now.getMinutes();
                const currentPosition = currentHour + currentMinute / 60;
                
                // í˜„ì¬ ì‹œê°„ì´ í‘œì‹œ ë²”ìœ„ ë‚´ì— ìˆëŠ” ê²½ìš°ì—ë§Œ í‘œì‹œ
                if (currentHour < 24) {
                    const container = currentView === 'day' ? 
                        document.querySelector(`.time-slot[data-hour="${Math.floor(currentPosition)}"]`) :
                        document.querySelector(`.week-time-slot[data-date="${formatDate(now)}"][data-hour="${Math.floor(currentPosition)}"]`);
                    
                    if (container) {
                        const line = document.createElement('div');
                        line.className = 'current-time-line';
                        line.style.top = `${(currentPosition % 1) * 40}px`;
                        
                        const marker = document.createElement('div');
                        marker.className = 'current-time-marker';
                        marker.style.top = `${(currentPosition % 1) * 40}px`;
                        
                        container.appendChild(line);
                        container.appendChild(marker);
                    }
                }
            }
        }
        
        // ì´ë²¤íŠ¸ ëª¨ë‹¬ í‘œì‹œ
        function showEventModal(event) {
            modalTitle.textContent = event.title;
            modalTime.textContent = `${formatKoreanDate(event.date)} ${formatTime(event.time_start)} - ${formatTime(event.time_end)}`;
            modalContent.textContent = event.content;
            modalCategory.textContent = getCategoryName(event.category);
            modalCategory.style.backgroundColor = getCategoryColor(event.category);
            
            eventModal.style.display = 'block';
        }
        
        // ëª¨ë‹¬ ë‹«ê¸°
        function closeEventModal() {
            eventModal.style.display = 'none';
        }
        
        // í˜„ì¬ ë·° ì—…ë°ì´íŠ¸
        function updateView() {
            // í™œì„± ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            monthViewBtn.classList.toggle('active', currentView === 'month');
            weekViewBtn.classList.toggle('active', currentView === 'week');
            dayViewBtn.classList.toggle('active', currentView === 'day');
            
            // ì„ íƒëœ ë·° ë Œë”ë§
            switch (currentView) {
                case 'month':
                    renderMonthView();
                    break;
                case 'week':
                    renderWeekView();
                    break;
                case 'day':
                    renderDayView();
                    break;
            }
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        monthViewBtn.addEventListener('click', () => {
            currentView = 'month';
            updateView();
        });
        
        weekViewBtn.addEventListener('click', () => {
            currentView = 'week';
            updateView();
        });
        
        dayViewBtn.addEventListener('click', () => {
            currentView = 'day';
            updateView();
        });
        
        prevBtn.addEventListener('click', () => {
            switch (currentView) {
                case 'month':
                    currentDate.setMonth(currentDate.getMonth() - 1);
                    break;
                case 'week':
                    currentDate.setDate(currentDate.getDate() - 7);
                    break;
                case 'day':
                    currentDate.setDate(currentDate.getDate() - 1);
                    break;
            }
            updateView();
        });
        
        nextBtn.addEventListener('click', () => {
            switch (currentView) {
                case 'month':
                    currentDate.setMonth(currentDate.getMonth() + 1);
                    break;
                case 'week':
                    currentDate.setDate(currentDate.getDate() + 7);
                    break;
                case 'day':
                    currentDate.setDate(currentDate.getDate() + 1);
                    break;
            }
            updateView();
        });
        
        todayBtn.addEventListener('click', () => {
            currentDate = new Date();
            updateView();
        });
        
        closeModal.addEventListener('click', closeEventModal);
        
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.addEventListener('click', (event) => {
            if (event.target === eventModal) {
                closeEventModal();
            }
        });
        
        // ì´ˆê¸°í™”
        initializeLocalStorage();
        monthViewBtn.click(); // ê¸°ë³¸ ë·°ë¡œ ì›”ë³„ ë·° í‘œì‹œ
        
        // 1ë¶„ë§ˆë‹¤ í˜„ì¬ ì‹œê°„ í‘œì‹œì„  ì—…ë°ì´íŠ¸
        setInterval(() => {
            if (currentView === 'week' || currentView === 'day') {
                addCurrentTimeLine();
            }
        }, 60000);

        
        // ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        document.addEventListener('DOMContentLoaded', () => {
            // localStorage ì´ˆê¸°í™”
            initializeLocalStorage();
            
            // ê¸°ë³¸ ë·°ë¡œ ì›”ë³„ ë·° í‘œì‹œ
            currentView = 'month';
            updateView();
            
            // 1ë¶„ë§ˆë‹¤ í˜„ì¬ ì‹œê°„ í‘œì‹œì„  ì—…ë°ì´íŠ¸
            setInterval(() => {
                if (currentView === 'week' || currentView === 'day') {
                    addCurrentTimeLine();
                }
            }, 60000);
        });
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ë¶€ë¶„ì€ ê·¸ëŒ€ë¡œ ìœ ì§€
        monthViewBtn.addEventListener('click', () => {
            currentView = 'month';
            updateView();
        });
        
    </script>
</body>
</html>